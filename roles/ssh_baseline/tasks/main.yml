---
- name: Ensure OpenSSH server is installed
  ansible.builtin.apt:
    name: openssh-server
    state: present
    update_cache: yes

- name: Ensure SSH service is enabled and running
  ansible.builtin.service:
    name: ssh
    enabled: yes
    state: started

- name: Allow SSH through UFW (if installed)
  ansible.builtin.ufw:
    rule: allow
    name: OpenSSH
  ignore_errors: yes
